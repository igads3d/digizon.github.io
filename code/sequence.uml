@startuml
participant Разработчик as dev
participant VCS as git
participant "Сервер автоматизации" as ci
participant "Исполняющая ВМ" as runner
participant "Система управления\nконтейнерной инфраструктурой" as kuber

dev -> dev : Написать код
dev -> git : Отправить изменения в VCS
git -> ci : Обнаружены изменения, запустить пайплайн
ci -> runner : Выполнить указанные команды
runner -> runner : Запустить линтер
runner -> runner : Собрать приложение
runner -> runner : Запустить автотесты
runner -> ci : вернуть результаты тестов\nи работы линтера
ci -> git : вернуть результаты тестов\nи работы линтера
git -> dev : Показать результаты тестов\nи работы линтера
group #red Тесты не пройдены или линтер имеет претензии к коду
  git -> dev : Сообщить о возникших ошибках
end
group #lightgreen Тесты пройдены и линтер не имеет претензий к коду
  ci -> kuber : Отправить новую конфигурацию\nтестового контура
  kuber -> kuber : Привести инфраструктуру в новое состояние
  kuber -> ci : Вернуть результаты применения\nновой конфигурации
  ci -> git : Передать результаты применения\nновой конфигурации
  git -> dev : Сообщить об успешном прохождении\nвсех этапов пайплайна
end
@enduml
